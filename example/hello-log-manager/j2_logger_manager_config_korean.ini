; =======================
; j2 / spdlog 설정 파일
; =======================
; 리로드 구분 안내
; - [soft-reload] : 재시작 없이 즉시 반영(레벨/패턴/시간/flush_on/주기적 플러시/디스크 감시 ON/OFF 등)
; - [hard-reload] : sink 재생성 필요(on/off, 경로, 회전 용량/백업 개수)
; - [init-only]   : 최초 초기화에서만 읽음(AUTO_RELOAD_SEC)
;
; 하드 리로드 주의
; - 파일 경로 변경 시 새 파일로 즉시 전환(기존 파일 보존), 권한/네트워크 경로 주의
; - 회전 용량/백업 개수 축소는 즉시 파일을 줄이지 않으며 다음 회전부터 적용
; - 매우 큰 용량(GB~TB)은 64비트 권장, 파일시스템 한계·ulimit에 유의

[Log]

; ===== [init-only] 최초 1회만 읽음 =====
;
; INI 파일을 읽는 주기 (초 단위)
AUTO_RELOAD_SEC=60

; ===== [hard-reload] sink 재생성 필요 =====

; 콘솔 로깅 사용 여부 
ENABLE_CONSOLE_LOG=true
;
; ALL 파일 로깅 사용 여부
ENABLE_FILE_LOG_ALL=true
;
; ALERT 파일 로깅 사용 여부
ENABLE_FILE_LOG_ALERTS=true

; ALL 파일 로깅 시, 파일 경로
ALL_PATH=logs/all.log
;
; ALERT 파일 로깅 시, 파일 경로
ALERTS_PATH=logs/alerts.log

; 로깅 파일 회전 정책
;
; ALL 로깅 파일) 500MB = 100MB(1개 파일의 최대 크기) * 5개(최대 백업 갯수)
;  파일 용량은 B(바이트), KB, MB, TB 사용 가능. 2.3TB 형식도 사용 가능.
ALL_MAX_SIZE=100MB
ALL_MAX_FILES=5
; 
; ALERT 로깅 파일) 최대 약 1GB = 100MB * 10개
ALERT_MAX_SIZE=100MB
ALERT_MAX_FILES=10

; ===== [soft-reload] 즉시 반영 =====

; 로깅 사용 시, 시간 표시 방법 (utc: 세계협정시, local: 로컬시간)
TIME_MODE=local

; 최소 레벨(이상)
;   trace, debug, info, warn, error, critical, off
;
; 로거의 최소 레벨 (특별한 경우가 아니면 trace를 설정함)
LOGGER_LEVEL=trace
; LOGGER_LEVEL=trace, CONSOLE_LEVEL=warn → 로거는 다 받지만, 콘솔에는 warn 이상만 보임.
; LOGGER_LEVEL=info, ALL_FILE_LEVEL=trace → 로거에서 trace/debug가 이미 버려져서 파일에도 안 감.
; LOGGER_LEVEL=trace, ALL_FILE_LEVEL=trace, ALERTS_FILE_LEVEL=warn → all.log엔 전부, alerts.log엔 warn+만.
;
; 콘솔의 최소 레벨
CONSOLE_LEVEL=trace
; CONSOLE_LEVEL=critical
;
; ALL 파일 로깅의 최소 레벨 (trace 이면 모든 레벨이 파일 로깅됨)
ALL_FILE_LEVEL=trace
;
; ALERT 파일 로깅의 최소 레벨 (보통 warn, error, ciritcal 사용)
ALERTS_FILE_LEVEL=warn
;
; 특정 레벨 이상이면 파일에 바로 적음
FLUSH_ON_LEVEL=warn

; 파일 로깅 시 주기적 파일 플러시 시간 (초 단위)
FLUSH_EVERY_SEC=1

; 로깅 사용 시 패턴
;   %Y %m %d %H %M %S %e = 시간
;   %l=레벨  %t=스레드ID  %v=메시지  %^/%$=컬러 on/off
PATTERN_CONSOLE=[%Y-%m-%d %H:%M:%S.%e] [%^%l%$] [%t] %v
PATTERN_FILE=[%Y-%m-%d %H:%M:%S.%e] [%l] [%t] %v

; ===== 디스크 감시(단일, soft-reload) =====
;
; 디스크 감시 ON/OFF
DISK_GUARD_ENABLE=false
;
; 감시할 디스크(또는 마운트/드라이브) 상의 경로. 예) /hello 또는 C:\hello
; DISK_ROOT=/hello
DISK_ROOT=C:\
;
; 잔여 비율(%)이 임계값 미만이면 파일 로깅 중지 (콘솔만 출력)
DISK_MIN_FREE_RATIO=5
;
; 파일 로깅 중지 동안 UDP 알림 전송
UDP_ALERT_IP=127.0.0.1
UDP_ALERT_PORT=10514
; UDP 메시지 전송 주기 (초 단위)
UDP_ALERT_INTERVAL_SEC=60
;
; UDP 메시지 형식
; 플레이스홀더: {path}={DISK_ROOT}, {avail_bytes}=가용 바이트, {ratio}=잔여 비율(%)
UDP_ALERT_MESSAGE=DISK LOW: path={path} free={avail_bytes}B ({ratio}%)

